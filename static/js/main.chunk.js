(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports={gallery:"gallery_gallery__3jv5p",gallery__img:"gallery_gallery__img__2ZpLj",gallery__title:"gallery_gallery__title__3CPpL",gallery__container:"gallery_gallery__container__lHHT7",gallery__imagecontainer:"gallery_gallery__imagecontainer__3ZRh3",gallery__right:"gallery_gallery__right__b1XiX",gallery__info:"gallery_gallery__info__2U600",gallery__phototitle:"gallery_gallery__phototitle__3aaRX",gallery__photocaption:"gallery_gallery__photocaption__3Kli_",gallery__nav:"gallery_gallery__nav__3_sGu",gallery__nav_left:"gallery_gallery__nav_left__3tJHg",gallery__nav_right:"gallery_gallery__nav_right__1WVf9"}},14:function(e,t,a){e.exports={"c-section-head":"sectionheader_c-section-head__A0tGn","c-section-head__title-container":"sectionheader_c-section-head__title-container__3K0Se","c-section-head__link":"sectionheader_c-section-head__link__3J1wh","c-section-head__title":"sectionheader_c-section-head__title__21n1n","c-section-head__title--40":"sectionheader_c-section-head__title--40__2FUVB","c-section-head__title--light":"sectionheader_c-section-head__title--light__7WCCz","c-section-head__rule":"sectionheader_c-section-head__rule__1kMb0","c-section-head__buttons":"sectionheader_c-section-head__buttons__1zLaq","c-section-head__favourite":"sectionheader_c-section-head__favourite__2zXrx","c-section-head__favouriteOn":"sectionheader_c-section-head__favouriteOn__QkawM","c-section-head__favourite--grey":"sectionheader_c-section-head__favourite--grey__2LByI","c-section-head__cart":"sectionheader_c-section-head__cart__1SrQi","c-section-head__cartOn":"sectionheader_c-section-head__cartOn__3lel4"}},140:function(e,t,a){e.exports={row:"row_row__1Q7uE"}},141:function(e,t,a){e.exports={"col-1":"grid_col-1__1Q2D2","col-2":"grid_col-2__jhraE","col-3":"grid_col-3__2Z85N","col-4":"grid_col-4__2ouhB","col-5":"grid_col-5__1JIjO","col-6":"grid_col-6__2l_BQ","col-7":"grid_col-7__3yrNF","col-8":"grid_col-8__2GOGc","col-9":"grid_col-9__2UI3b","col-10":"grid_col-10__2IUpv","col-11":"grid_col-11__1zllV","col-12":"grid_col-12__1TmPd",col:"grid_col__3S4JY","col-auto":"grid_col-auto__1oDnj","col-sm-1":"grid_col-sm-1__1vnNY","col-sm-2":"grid_col-sm-2__1wRvG","col-sm-3":"grid_col-sm-3__rHZlK","col-sm-4":"grid_col-sm-4__3Og8R","col-sm-5":"grid_col-sm-5__1GHH0","col-sm-6":"grid_col-sm-6__r9A-Z","col-sm-7":"grid_col-sm-7__1fF2M","col-sm-8":"grid_col-sm-8__5t-mE","col-sm-9":"grid_col-sm-9__2qSUE","col-sm-10":"grid_col-sm-10__1Ccg3","col-sm-11":"grid_col-sm-11__1Ay7O","col-sm-12":"grid_col-sm-12__2Nh4K","col-sm":"grid_col-sm__39QWP","col-sm-auto":"grid_col-sm-auto__26qYQ","col-md-1":"grid_col-md-1__LoyII","col-md-2":"grid_col-md-2__39yuB","col-md-3":"grid_col-md-3___iyn4","col-md-4":"grid_col-md-4__3mz5O","col-md-5":"grid_col-md-5__3_5MC","col-md-6":"grid_col-md-6__28hO8","col-md-7":"grid_col-md-7__3jfwK","col-md-8":"grid_col-md-8__28hjj","col-md-9":"grid_col-md-9__14LE8","col-md-10":"grid_col-md-10__14mLp","col-md-11":"grid_col-md-11__3BApq","col-md-12":"grid_col-md-12__3_ETV","col-md":"grid_col-md__2f33q","col-md-auto":"grid_col-md-auto__2qYdk","col-lg-1":"grid_col-lg-1__OR9Gn","col-lg-2":"grid_col-lg-2__29SFb","col-lg-3":"grid_col-lg-3__1o51F","col-lg-4":"grid_col-lg-4__2k7_G","col-lg-5":"grid_col-lg-5__27977","col-lg-6":"grid_col-lg-6__2Tp-b","col-lg-7":"grid_col-lg-7__2crnI","col-lg-8":"grid_col-lg-8__3E0FG","col-lg-9":"grid_col-lg-9__3Lk3f","col-lg-10":"grid_col-lg-10__1tjxK","col-lg-11":"grid_col-lg-11__1_HOR","col-lg-12":"grid_col-lg-12__thUZl","col-lg":"grid_col-lg__1y5H_","col-lg-auto":"grid_col-lg-auto__3Jx_f","col-xl-1":"grid_col-xl-1__2nsUD","col-xl-2":"grid_col-xl-2__otBzI","col-xl-3":"grid_col-xl-3__2lsB5","col-xl-4":"grid_col-xl-4__37qcb","col-xl-5":"grid_col-xl-5__3MM-G","col-xl-6":"grid_col-xl-6__KDKry","col-xl-7":"grid_col-xl-7__3btjl","col-xl-8":"grid_col-xl-8__37tXX","col-xl-9":"grid_col-xl-9__AfPhl","col-xl-10":"grid_col-xl-10__22-Hi","col-xl-11":"grid_col-xl-11__3CP_U","col-xl-12":"grid_col-xl-12__1t8bx","col-xl":"grid_col-xl__1bN1L","col-xl-auto":"grid_col-xl-auto__58rEt","order-first":"grid_order-first__1OOqQ","order-last":"grid_order-last__nqOSk","order-0":"grid_order-0__3SVbz","order-1":"grid_order-1__2bHlq","order-2":"grid_order-2__V_zkB","order-3":"grid_order-3__Irn66","order-4":"grid_order-4__2poyO","order-5":"grid_order-5__1V60O","order-6":"grid_order-6__356Us","order-7":"grid_order-7__1cS52","order-8":"grid_order-8__1NM7r","order-9":"grid_order-9__3ZUVe","order-10":"grid_order-10__1jwZb","order-11":"grid_order-11__22AuM","order-12":"grid_order-12__s44tX","offset-1":"grid_offset-1__3oYp7","offset-2":"grid_offset-2__2cFCQ","offset-3":"grid_offset-3__fUzyj","offset-4":"grid_offset-4__3HJqv","offset-5":"grid_offset-5__2DsDP","offset-6":"grid_offset-6__3Nx0f","offset-7":"grid_offset-7__1eKci","offset-8":"grid_offset-8__LWmVi","offset-9":"grid_offset-9__1SJ1Z","offset-10":"grid_offset-10__awn2A","offset-11":"grid_offset-11__kMuM-","order-sm-first":"grid_order-sm-first__1tIbY","order-sm-last":"grid_order-sm-last__39eQK","order-sm-0":"grid_order-sm-0__1EmeK","order-sm-1":"grid_order-sm-1__3-ssh","order-sm-2":"grid_order-sm-2__2j8xU","order-sm-3":"grid_order-sm-3__1QNiz","order-sm-4":"grid_order-sm-4__2Ty0n","order-sm-5":"grid_order-sm-5__3BNgq","order-sm-6":"grid_order-sm-6__1HUGO","order-sm-7":"grid_order-sm-7__3aK61","order-sm-8":"grid_order-sm-8__3WyVs","order-sm-9":"grid_order-sm-9__1IajW","order-sm-10":"grid_order-sm-10__2XaEY","order-sm-11":"grid_order-sm-11__164xX","order-sm-12":"grid_order-sm-12__3rKhC","offset-sm-0":"grid_offset-sm-0__3EQZ6","offset-sm-1":"grid_offset-sm-1__tY8f-","offset-sm-2":"grid_offset-sm-2__DcRKj","offset-sm-3":"grid_offset-sm-3__15olo","offset-sm-4":"grid_offset-sm-4__3w3H4","offset-sm-5":"grid_offset-sm-5__rUHBe","offset-sm-6":"grid_offset-sm-6__HHQWO","offset-sm-7":"grid_offset-sm-7__113MJ","offset-sm-8":"grid_offset-sm-8__11DNk","offset-sm-9":"grid_offset-sm-9__3UL7H","offset-sm-10":"grid_offset-sm-10__1jyea","offset-sm-11":"grid_offset-sm-11__18yDm","order-md-first":"grid_order-md-first__1PSby","order-md-last":"grid_order-md-last__1DiEz","order-md-0":"grid_order-md-0__17oIp","order-md-1":"grid_order-md-1__z1Nn6","order-md-2":"grid_order-md-2__3raiY","order-md-3":"grid_order-md-3__aykft","order-md-4":"grid_order-md-4__2xMX-","order-md-5":"grid_order-md-5__2Wak_","order-md-6":"grid_order-md-6__1DTer","order-md-7":"grid_order-md-7__37fdK","order-md-8":"grid_order-md-8__3ttxD","order-md-9":"grid_order-md-9__2HjBn","order-md-10":"grid_order-md-10__3JASv","order-md-11":"grid_order-md-11__xCuU1","order-md-12":"grid_order-md-12__3qi4e","offset-md-0":"grid_offset-md-0__1_ErT","offset-md-1":"grid_offset-md-1__3Ibyh","offset-md-2":"grid_offset-md-2__2IGPI","offset-md-3":"grid_offset-md-3__3hhQF","offset-md-4":"grid_offset-md-4__2-Maw","offset-md-5":"grid_offset-md-5__331ZS","offset-md-6":"grid_offset-md-6__18MY7","offset-md-7":"grid_offset-md-7__9Dzl6","offset-md-8":"grid_offset-md-8__X2E6l","offset-md-9":"grid_offset-md-9__1b9tE","offset-md-10":"grid_offset-md-10__tgULP","offset-md-11":"grid_offset-md-11__AiQK0","order-lg-first":"grid_order-lg-first__2OJdL","order-lg-last":"grid_order-lg-last__3Frcz","order-lg-0":"grid_order-lg-0__32Aki","order-lg-1":"grid_order-lg-1__20j1u","order-lg-2":"grid_order-lg-2__361IA","order-lg-3":"grid_order-lg-3__2sNXY","order-lg-4":"grid_order-lg-4__t7Z1O","order-lg-5":"grid_order-lg-5__35RuY","order-lg-6":"grid_order-lg-6__3eq65","order-lg-7":"grid_order-lg-7__fyomq","order-lg-8":"grid_order-lg-8__1F3lh","order-lg-9":"grid_order-lg-9__3YaQd","order-lg-10":"grid_order-lg-10__1hJfb","order-lg-11":"grid_order-lg-11__3zfqP","order-lg-12":"grid_order-lg-12__psGW6","offset-lg-0":"grid_offset-lg-0__1Jjxe","offset-lg-1":"grid_offset-lg-1__3_MJQ","offset-lg-2":"grid_offset-lg-2__3hSSf","offset-lg-3":"grid_offset-lg-3__3nv0v","offset-lg-4":"grid_offset-lg-4__ktUKK","offset-lg-5":"grid_offset-lg-5__1Jtfo","offset-lg-6":"grid_offset-lg-6__n32FT","offset-lg-7":"grid_offset-lg-7__clpGA","offset-lg-8":"grid_offset-lg-8__3Skeh","offset-lg-9":"grid_offset-lg-9__2vTUC","offset-lg-10":"grid_offset-lg-10__2fpg-","offset-lg-11":"grid_offset-lg-11__1cNLZ","order-xl-first":"grid_order-xl-first__32H6I","order-xl-last":"grid_order-xl-last__qtYVt","order-xl-0":"grid_order-xl-0__1tjj5","order-xl-1":"grid_order-xl-1__1vpdB","order-xl-2":"grid_order-xl-2__1Cn9N","order-xl-3":"grid_order-xl-3__2cC84","order-xl-4":"grid_order-xl-4__QogKv","order-xl-5":"grid_order-xl-5__1tyz0","order-xl-6":"grid_order-xl-6__3bDm2","order-xl-7":"grid_order-xl-7__2L4Ga","order-xl-8":"grid_order-xl-8__1M8UU","order-xl-9":"grid_order-xl-9__1lYU3","order-xl-10":"grid_order-xl-10__3_G05","order-xl-11":"grid_order-xl-11__m4lP5","order-xl-12":"grid_order-xl-12__BNJyn","offset-xl-0":"grid_offset-xl-0__-K1hF","offset-xl-1":"grid_offset-xl-1__1Q_2a","offset-xl-2":"grid_offset-xl-2__ekps1","offset-xl-3":"grid_offset-xl-3__SvczJ","offset-xl-4":"grid_offset-xl-4__2qC7i","offset-xl-5":"grid_offset-xl-5__3HXYF","offset-xl-6":"grid_offset-xl-6__334ZP","offset-xl-7":"grid_offset-xl-7__1o74Q","offset-xl-8":"grid_offset-xl-8__19GX4","offset-xl-9":"grid_offset-xl-9__3mXlv","offset-xl-10":"grid_offset-xl-10__2_7WD","offset-xl-11":"grid_offset-xl-11__L2Nsv"}},142:function(e,t,a){e.exports={container:"container_container__ETo2S","container-fluid":"container_container-fluid__mwHij"}},158:function(e,t,a){e.exports={divider:"divider_divider__3_60k"}},161:function(e,t,a){e.exports={close:"close_close__3f7fB"}},168:function(e,t,a){e.exports=a(373)},238:function(e,t,a){},240:function(e,t,a){},30:function(e,t,a){e.exports={modal:"modal_modal__2yAB_",modal__window:"modal_modal__window__2GyaX",modal__container:"modal_modal__container__3SQo9",modal__header:"modal_modal__header__Nr4gA",modal__title:"modal_modal__title__3b76h",modal__message:"modal_modal__message__2Qvk_",modal__close:"modal_modal__close__1NnwZ","modal__content-window":"modal_modal__content-window__2RGyO"}},367:function(e,t,a){},371:function(e,t,a){},373:function(e,t,a){"use strict";a.r(t);var r=a(0),o=a.n(r),l=a(18),n=a.n(l),i=a(6),s=a(10),c=a(8),d=a(7),_=a(9),u=a(86),m=a(42),g=a(140),h=a.n(g),p=function(e){return o.a.createElement("div",{className:h.a.row},e.children)},f=a(141),b=a.n(f),v=function(e){var t="";return e.classes&&(t=e.classes.map(function(e){return b.a[e]})),o.a.createElement("div",{className:t.join(" ")},e.children)},y=a(142),E=a.n(y),w=function(e){return o.a.createElement("div",{className:E.a.container},e.children)},x=a(5),k=a(3),O=a.n(k),j=a(49),C=a.n(j),N=a(92),D=a.n(N),S=a(66),I=a.n(S),T=a(93),H=a.n(T),F=function(e){var t=e.id||null,a=e.type||null,r=e.classes.map(function(e){return!!H.a[e]&&H.a[e]});return o.a.createElement("button",{onClick:e.handler,id:t,className:O()(r),type:a},e.children)},P=a(94),R=a.n(P),G=a(165),A=(a(212),function(e){return o.a.createElement("div",{className:R.a.datepicker},o.a.createElement("div",{onClick:function(t){return e.toggle(t,e.index)}},e.date?e.date.format("Do MMM YY"):e.label),o.a.createElement("div",{className:R.a.datepicker__calander_container},"active"===e.status?o.a.createElement(G.a,{width:350,height:400,selected:e.date||e.today,disabledDays:[0,6],minDate:e.lastWeek,onSelect:function(t){return e.handler(t,e.index)}}):null))}),L=a(16),M=a.n(L),U=a(155),W=a.n(U),Q=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this))).limit=e.limit||10,a.offset=e.offset||0,a.options={nonPinnedOffset:e.non_pinned||-1,loadtype:e.loadtype||"home",offset:e.offset||0,blogid:e.blogid,search:e.searchterm||null,limit:e.limit},a}return Object(_.a)(t,e),t}(function e(){var t=this;Object(i.a)(this,e),this.fetch=function(){null!=t.options.search&&(t.options.blogid=t.options.blogid);var e="post",a="/home/load-articles",r={offset:t.options.offset,limit:t.options.limit,dateFormat:"SHORT",existingNonPinnedCount:t.options.nonPinnedOffset};if(t.options.blogid&&(r.blogguid=t.options.blogid),"user"===t.options.loadtype&&(a="/api/"+t.options.loadtype+"/load-more-managed",e="get"),"user_articles"===t.options.loadtype){var o=(a=window.location.href).split("/"),l=decodeURIComponent(o[o.length-2]);a=window._appJsConfig.appHostName+"/profile/"+l+"/posts"}if(t.options.search){console.log("THIS IS A SEARCH");var n=t.options.search;r.s=n,a="/api/search",e="get"}return M.a[e](a,W.a.stringify(t.options)).then(function(e){}).catch(function(e){})}}),J=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).today=I()(),a.state={search:null,calanders:[0,0,0,0],calanderDates:{today:a.today,lastWeek:I()().subtract(7,"days")},dates:{published:null,taken:{start:null,end:null}}},a.search=function(){var e={offset:0,limit:10,non_pinned:0,searchterm:a.state.search},t=new Q(e).fetch();a.setState({photos:t})},a.searchTerm=function(e){a.setState({search:e.target.value})},a.toggleCalander=function(e,t){e&&e.stopPropagation();var r=a.state.calanders,o=[0,0,0,0];o[t-1]=!r[t-1],a.setState({calanders:o})},a.calanderSelect=function(e,t){var r=I()(e),o=Object(x.a)({},a.state.dates);1===t&&(o.published=r),2===t&&(o.taken.start=r),3===t&&(o.taken.end=r),4===t&&(o.taken.what=r),a.setState({dates:o}),a.toggleCalander(null,t)},a}return Object(_.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:C.a.search},o.a.createElement("div",{className:""},o.a.createElement("input",{value:this.props.search,onChange:function(t){return e.searchTerm(t)},type:"search",className:O()(D.a["c-form__input"],D.a["c-form__input--bordered"]),name:"search",id:"search",placeholder:"Search"}),o.a.createElement("span",{className:C.a.search__icon})),o.a.createElement("div",{className:C.a.search__dates},o.a.createElement(A,{index:1,toggle:this.toggleCalander,today:this.state.calanderDates.today,date:this.state.dates.published,lastweek:this.state.calanderDates.lastWeek,handler:this.calanderSelect,status:this.state.calanders[0]?"active":null,label:"Date published"}),o.a.createElement("p",{className:C.a.search__label},"Date photo taken"),o.a.createElement(A,{index:2,toggle:this.toggleCalander,today:this.state.calanderDates.today,date:this.state.dates.taken.start,lastweek:this.state.calanderDates.lastWeek,handler:this.calanderSelect,status:this.state.calanders[1]?"active":null,label:"Date range from"}),o.a.createElement(A,{index:3,toggle:this.toggleCalander,today:this.state.calanderDates.today,date:this.state.dates.taken.end,lastweek:this.state.calanderDates.lastWeek,handler:this.calanderSelect,status:this.state.calanders[2]?"active":null,label:"To"})),o.a.createElement(F,{handler:this.search,classes:["button","button--red","button--top-30"]},"SEARCH"))}}]),t}(r.Component),q=a(14),B=a.n(q),X=function(e){var t=[B.a["c-section-head__title"]];e.larger&&t.push(B.a["c-section-head__title--40"]),e.medium&&t.push(B.a["c-section-head__title--30"]),e.thin&&t.push(B.a["c-section-head__title--light"]);var a=O()(t),r=null;if(e.cart){var l=e.favourites>0?B.a["c-section-head__favouriteOn"]:"",n=O()(B.a["c-section-head__favourite"],l),i=e.cartItems>0?B.a["c-section-head__cartOn"]:"",s=O()(B.a["c-section-head__cart"],i);r=o.a.createElement("div",{className:B.a["c-section-head__buttons"]},o.a.createElement("div",{className:n,onClick:e.favouritesHandler},"Favourites"),o.a.createElement("div",{onClick:e.checkoutLinkHandler,className:s},e.cartItems," Check out"))}return o.a.createElement("div",{className:B.a["c-section-head"]},o.a.createElement("div",{className:B.a["c-section-head__title-container"]},o.a.createElement("h1",{onClick:e.homeLinkHandler,className:a},e.title),r),o.a.createElement("div",{className:B.a["c-section-head__rule"]}))},z=a(47),K=a.n(z),V=(a(238),a(240),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.count||0,a=this.props.panel||null,r=this.props.data.images&&this.props.data.images.length>0?this.props.data.images[0]:this.props.data,l=(this.props.type,null);return this.props.favourite&&(l=o.a.createElement("div",{className:"c-cards-view__buttons"},o.a.createElement("div",{onClick:function(){return e.props.favHandler(e.props.data)},className:"c-cards-view__favourite"}),o.a.createElement("div",{onClick:function(){return e.props.cartHandler(e.props.data)},className:"c-cards-view__cart"}))),o.a.createElement("div",{onClick:function(){return e.props.cardHandler(t,a)},className:this.props.styles},o.a.createElement("a",{href:this.props.data.url,className:"","data-id":this.props.data.id,"data-guid":this.props.data.guid,"data-position":this.props.data.position,"data-social":this.props.data.social,"data-article-image":this.props.data.articleImg,"data-article-text":this.props.data.title},o.a.createElement("article",{className:"c-cards-view"},r.hasMedia?o.a.createElement("figure",{className:"c-cards-view__media"},o.a.createElement("picture",null,o.a.createElement("source",{media:"(max-width: 767px) and (min-width: 501px)",srcSet:this.props.data.imageMedium}),o.a.createElement("source",{media:"(max-width: 500px)",srcSet:this.props.data.imageSmall}),!1===this.props.data.lazyload?o.a.createElement("img",{width:this.props.data.imgWidth,height:this.props.data.imgHeight,className:"img-fluid",src:r.image,alt:""}):o.a.createElement("img",{width:this.props.data.imgWidth,height:this.props.data.imgHeight,className:"img-fluid",src:r.image,"data-original":this.props.data.articleImg,alt:""}),o.a.createElement("div",{className:"video-icon"}))):null,o.a.createElement("div",{className:"c-cards-view__container"},o.a.createElement("div",{className:"c-cards-view__category"},this.props.data.category),o.a.createElement("h2",{className:"c-cards-view__heading"},o.a.createElement(K.a,{clamp:2},this.props.data.title)),l||null,o.a.createElement("div",{className:"c-cards-view__description"},o.a.createElement(K.a,{clamp:3},this.props.data.content)),o.a.createElement("div",{className:"c-cards-view__author"},o.a.createElement("div",{className:"c-cards-view_time"},this.props.data.publishDate))))))}}]),t}(r.Component)),Y=function(e){var t=0;return o.a.createElement(p,{key:e.title},o.a.createElement(v,{classes:["col-12"]},o.a.createElement(X,{title:e.title})),e.cards[t]?o.a.createElement(v,{classes:["col-12","col-md-4"]},o.a.createElement(V,{cardHandler:e.cardHandler,data:e.cards[t],count:t++,panel:e.title,styles:"card-1-mobile card-1-tablet card-1-desktop"})):null,e.cards[t]?o.a.createElement(v,{classes:["col-12","col-md-4"]},o.a.createElement(V,{cardHandler:e.cardHandler,data:e.cards[t],count:t++,panel:e.title,styles:"card-1-mobile card-1-tablet card-1-desktop"})):null,e.cards[t]?o.a.createElement(v,{classes:["col-12","col-md-4"]},o.a.createElement(V,{cardHandler:e.cardHandler,data:e.cards[t],count:t++,panel:e.title,styles:"card-1-mobile card-1-tablet card-1-desktop"})):null)},Z=function(e){var t=0;return o.a.createElement(p,{key:e.title},o.a.createElement(v,{classes:["col-12"]},o.a.createElement(X,{title:e.title})),e.cards[t]?o.a.createElement(v,{classes:["col-12","col-md-3"]},o.a.createElement(V,{cardHandler:e.cardHandler,data:e.cards[t],count:t++,panel:e.title,styles:"card-1-mobile card-1-tablet card-1-desktop"})):null,e.cards[t]?o.a.createElement(v,{classes:["col-12","col-md-3"]},o.a.createElement(V,{cardHandler:e.cardHandler,data:e.cards[t],count:t++,panel:e.title,styles:"card-1-mobile card-1-tablet card-1-desktop"})):null,e.cards[t]?o.a.createElement(v,{classes:["col-12","col-md-3"]},o.a.createElement(V,{cardHandler:e.cardHandler,data:e.cards[t],count:t++,panel:e.title,styles:"card-1-mobile card-1-tablet card-1-desktop"})):null,e.cards[t]?o.a.createElement(v,{classes:["col-12","col-md-3"]},o.a.createElement(V,{cardHandler:e.cardHandler,data:e.cards[t],count:t++,panel:e.title,styles:"card-1-mobile card-1-tablet card-1-desktop"})):null)},$=a(30),ee=a.n($),te=function(e){return o.a.createElement("div",{id:e.name,className:ee.a.modal},o.a.createElement("div",{id:"dialog",className:ee.a.modal__window},o.a.createElement("div",{className:ee.a.modal__container},o.a.createElement("div",{className:ee.a.modal__header},o.a.createElement("h2",{className:ee.a.modal__title},e.title),o.a.createElement("div",{className:ee.a.modal__close,onClick:e.closeHandler})),o.a.createElement("div",{id:"dialogContent",className:ee.a["modal__content-window"]},e.children()))))},ae=a(12),re=a(11),oe=a.n(re),le=a(96),ne=a.n(le),ie=(a(245),a(156)),se=a.n(ie),ce=a(157),de=a.n(ce),_e=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={current:0,gallery:null,items:[],images:[]},a.gallerySelect=function(e){a.setState({current:e})},a.toggleFavourite=function(){var e=Object(ae.a)(a.state.items),t=e[a.state.current];t.favourite=!t.favourite,a.setState({items:e}),a.props.favouriteHandler(e[a.state.current])},a.toggleCart=function(){var e=Object(ae.a)(a.state.items),t=e[a.state.current];t.cart=!t.cart,a.setState({items:e}),a.props.cartHandler(e[a.state.current])},a}return Object(_.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=new de.a.Cloudinary({cloud_name:"cognitives"}),t=this.props.panel.images.map(function(t){var a=e.url(t.image,{width:"580",height:"384",crop:"fit"});return{original:a,description:a,originalClass:oe.a.gallery__img}});this.setState({gallery:this.props.panel,items:this.props.panel.images,images:t})}},{key:"renderLeftNav",value:function(e,t){var a=O()(oe.a.gallery__nav,oe.a.gallery__nav_left);return o.a.createElement("button",{className:a,disabled:t,onClick:e})}},{key:"renderRightNav",value:function(e,t){var a=O()(oe.a.gallery__nav,oe.a.gallery__nav_right);return o.a.createElement("button",{className:a,disabled:t,onClick:e})}},{key:"render",value:function(){if(0===this.state.items.length)return null;var e=this.state.items[this.state.current],t=e.favourite?ne.a.favouriteOn:"",a=O()(ne.a.favourite,t),r=e.cart?"REMOVE FROM CART":"ADD TO CART";return o.a.createElement("div",{className:oe.a.gallery},o.a.createElement("h1",{className:oe.a.gallery__title},this.state.gallery.title),o.a.createElement("div",{className:oe.a.gallery__container},o.a.createElement("div",{className:oe.a.gallery__left},o.a.createElement("div",{className:oe.a.gallery__imagecontainer},o.a.createElement(se.a,{items:this.state.images,onSlide:this.gallerySelect,renderLeftNav:this.renderLeftNav,renderRightNav:this.renderRightNav,showThumbnails:!1}))),o.a.createElement("div",{className:oe.a.gallery__right},o.a.createElement("div",{onClick:this.toggleFavourite,className:a}),o.a.createElement("div",{className:oe.a.gallery__info},e?o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",{className:oe.a.gallery__phototitle},e.title),o.a.createElement("p",{className:oe.a.gallery__photocaption},e.content)):null,o.a.createElement(F,{handler:this.toggleCart,classes:["button","button--red","button--top-30"]},r)),o.a.createElement("div",{className:oe.a.gallery__meta},e?o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,o.a.createElement("span",null,"Size")," 1598 x 832 pixels at 300 dpi"),o.a.createElement("p",null,o.a.createElement("span",null,"Photographer")," Eliot Smithington"),o.a.createElement("p",null,o.a.createElement("span",null,"Date photo taken")," 22/03/2019")):null))))}}]),t}(r.Component),ue=a(97),me=a.n(ue),ge=a(158),he=a.n(ge),pe=function(){return o.a.createElement("div",{className:he.a.divider})},fe=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.favourites.map(function(t,a){var r=[o.a.createElement(V,{key:a,data:t,styles:"card-2-mobile card-2-tablet card-2-desktop",cardHandler:function(){return!1},favHandler:e.props.favHandler,cartHandler:e.props.cartHandler,favourite:!0})];return a!==e.props.favourites.length-1&&r.push(o.a.createElement(pe,{key:a+"div"})),r});return o.a.createElement("div",{className:me.a.favourites},o.a.createElement("h1",{className:me.a.favourites__title},"Favourites"),t||null)}}]),t}(r.Component),be=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={networkData:null,blogData:{title:"Photo sales",url:"www.picturebooth.com",guid:"b6d174e5-70d2-4274-900a-46632b9b3e56"},panels:[],photos:null,showGallery:!1,selectedGallery:null,favourites:[],cart:[]},a.getPanels=function(){var e=[{title:"Galleries",url:"galleryurl",blog:"Galleries",template:"panel1"},{title:"Archive photos",url:"galleryurl",blog:"Australia",template:"panel2"},{title:"All photos",url:"galleryurl",blog:"Business",template:"panel1"}];e.forEach(function(e){e.feed=[{title:"cats and lego",date:"25th February 2019",images:[{id:"j49fj3fgsdsgdf8rj",title:"Cat",content:"This is the body content which is very long as i want it to dot dot dot with an eillpsesssese so that i can see it's wokring and then celebrate a job well done",publishDate:"23rd may 2000",hasMedia:!0,image:"https://i.ytimg.com/vi/EuvTORWs244/maxresdefault.jpg"},{id:"lkiuygfyny66",title:"Lego",content:"Less writing for the second card",publishDate:"24rd may 2000",hasMedia:!0,image:"https://weburbanist.com/wp-content/uploads/2008/10/lego_art_1.jpg"},{id:"mjghjligm",title:"Guitar!",content:"Less writing for the second card",publishDate:"24rd may 2000",hasMedia:!0,image:"https://www.geekalerts.com/u/lego-guitar.jpg"}]},{title:"Prince",date:"25th April 2010",images:[{id:"6e5hfdghs5dt",title:"Prince One",content:"First image in another gallery",publishDate:"23rd may 2000",hasMedia:!0,image:"https://static.guim.co.uk/sys-images/Music/Pix/pictures/2011/6/3/1307115506503/Prince-performing-on-stag-007.jpg"},{id:"jkjjfddswyj",title:"Prince Two",content:"What's he been up to all these years",publishDate:"24rd may 2000",hasMedia:!0,image:"http://4.bp.blogspot.com/-lqsQusSni-Q/TnvzRGHOH_I/AAAAAAAAARg/sYebBSwumX4/w1200-h630-p-k-nu/prince-hohner-telecaster.jpg"},{id:"bgdsr44",title:"Prince Three",content:"Lelatlalala",publishDate:"24rd may 2000",hasMedia:!0,image:"https://images.uncyclomedia.co/uncyclopedia/en/thumb/d/df/Purple-Rain-Prince.jpg/400px-Purple-Rain-Prince.jpg"}]},{title:"David Bowie",date:"25th April 2014",images:[{id:"j49fda4j38rj",title:"Bowie One",content:"This is the body content which is very long as i want it to dot dot dot with an eillpsesssese so that i can see it's wokring and then celebrate a job well done",publishDate:"23rd may 2000",hasMedia:!0,image:"https://www.simpleminds.com/wp-content/uploads/2016/02/bowie.jpg"},{id:"j49fj38rj",title:"Bowie Two",content:"Less writing for the second card",publishDate:"24rd may 2000",hasMedia:!0,image:"http://exclaim.ca/images/up-4bowie.jpg"},{id:"fsdbfht",title:"Bowie Three",content:"Less writing for the second card",publishDate:"24rd may 2000",hasMedia:!0,image:"http://img2-ak.lst.fm/i/u/arO/b35700b21cb147e280097ff6ec5e43e7"}]}]}),a.setState({panels:e})},a.getFeed=function(){var e={offset:0,limit:10,blogid:a.state.blogData.guid,non_pinned:0},t=new Q(e).fetch();a.setState({photos:t})},a.checkoutLinkHandler=function(){a.props.history.push("/"+window.layoutTemplate+"/checkout/")},a.showGallery=function(e,t){var r=null,o=a.state.panels.find(function(e){return e.title===t});o&&(r=o.feed[e]),a.setState({selectedGallery:r,showGallery:!0,showFavourites:!1}),document.body.setAttribute("style","overflow: hidden;")},a.closeGallery=function(){a.setState({showGallery:!1}),document.body.removeAttribute("style","overflow: hidden;")},a.showFavourites=function(){a.props.favourites.length>0&&(a.setState({showFavourites:!0,showGallery:!1}),document.body.setAttribute("style","overflow: hidden;"))},a.closeFavourites=function(){a.setState({showFavourites:!1}),document.body.removeAttribute("style","overflow: hidden;")},a}return Object(_.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getFeed(),this.getPanels()}},{key:"render",value:function(){var e=this,t=o.a.createElement(te,{closeHandler:this.closeGallery,children:function(t){return o.a.createElement(_e,{panel:e.state.selectedGallery,favouriteHandler:e.props.toggleFavourite,cartHandler:e.props.toggleCart})}}),a=o.a.createElement(te,{closeHandler:this.closeFavourites,children:function(t){return o.a.createElement(fe,{favourites:e.props.favourites,favHandler:e.props.toggleFavourite,cartHandler:e.props.toggleCart})}});return o.a.createElement(o.a.Fragment,null,this.state.showGallery?t:null,this.state.showFavourites?a:null,o.a.createElement(w,null,o.a.createElement(p,null,o.a.createElement(v,{classes:["col-12"]},o.a.createElement(X,{title:this.state.blogData.title,url:this.state.blogData.url,favourites:this.props.favourites.length,cartItems:this.props.cart.length,favouritesHandler:this.showFavourites,checkoutLinkHandler:this.checkoutLinkHandler,homeLinkHandler:null,larger:!0,cart:!0}))),o.a.createElement(p,null,o.a.createElement(v,{classes:["col-12","col-md-9"]},o.a.createElement(J,null)))),this.state.panels.map(function(t,a){return o.a.createElement(w,{key:a},"panel1"===t.template?o.a.createElement(Y,{cardHandler:e.showGallery,title:t.title,cards:t.feed}):null,"panel2"===t.template?o.a.createElement(Z,{cardHandler:e.showGallery,title:t.title,cards:t.feed}):null)}))}}]),t}(r.Component),ve=Object(m.b)(function(e){return{favourites:e.favourites,cart:e.cart}},function(e){return{toggleFavourite:function(t){e({type:"TOGGLE_FAVOURITE",photo:t})},toggleCart:function(t){return e({type:"TOGGLE_CART",photo:t})}}})(be),ye=a(35),Ee=a(167),we=a(36);function xe(){var e=Object(ye.a)(["\n    display: inline-block;\n    vertical-align: middle;\n"]);return xe=function(){return e},e}function ke(){var e=Object(ye.a)(["\n    display: inline-block;\n    width: 16px;\n    height: 16px;\n    border-radius: 50%;\n    border: 1px solid #979797;\n    transition: all 150ms;\n    ",":focus + & {\n        box-shadow: 0 0 0 3px rgba(69, 115, 205, 0.1);\n    }\n    "," {\n        visibility: ","\n    }\n\n"]);return ke=function(){return e},e}function Oe(){var e=Object(ye.a)(["\n    fill: none;\n    stroke: white;\n    /* stroke-width: 2px; */\n"]);return Oe=function(){return e},e}function je(){var e=Object(ye.a)(["\n    // Hide checkbox visually but remain accessible to screen readers.\n    // Source: https://polished.js.org/docs/#hidevisually\n    border: 0;\n    clip: rect(0 0 0 0);\n    clippath: inset(50%);\n    height: 1px;\n    margin: -1px;\n    overflow: hidden;\n    padding: 0;\n    position: absolute;\n    white-space: nowrap;\n    width: 1px;\n"]);return je=function(){return e},e}var Ce=we.a.input.attrs({type:"checkbox"})(je()),Ne=we.a.svg(Oe()),De=we.a.div(ke(),Ce,Ne,function(e){return e.checked?"visible":"hidden"}),Se=we.a.div(xe()),Ie=function(e){var t=e.className,a=e.checked,r=Object(Ee.a)(e,["className","checked"]);return o.a.createElement("label",null,o.a.createElement(Se,{className:t},o.a.createElement(Ce,Object.assign({checked:a},r)),o.a.createElement(De,{checked:a},o.a.createElement(Ne,{viewBox:"0 0 24 24"},o.a.createElement("circle",{cx:"12",cy:"12",r:"10",fill:"#4573cd"})))),r.label?o.a.createElement("span",null," ",r.label," "):"")};function Te(){var e=Object(ye.a)(["\n    position:relative;\n    display: flex;\n    flex-direction:horizontal;\n    align-items:center;\n"]);return Te=function(){return e},e}var He=we.a.div(Te()),Fe=function(e){var t=e.children;return o.a.createElement(He,null,t)},Pe=a(164),Re=a(67),Ge=a.n(Re),Ae=function(e){var t={option:function(e,t){return Object(x.a)({},e)},control:function(e,t){var a=Object(x.a)({},e,{borderRadius:0});return t.isDisabled&&(a.backgroundColor="white"),a},dropdownIndicator:function(e,t){var a=Object(x.a)({},e);return t.isDisabled&&(a.color="white"),a},indicatorSeparator:function(e,t){var a=Object(x.a)({},e);return t.isDisabled&&(a.backgroundColor="white"),a},indicatorsContainer:function(e,t){var a=Object(x.a)({},e);return t.isDisabled&&(a.display="none"),a}},a=e.options.filter(function(e){return!e.disabled}),r=null;e.handleRemove&&(r=o.a.createElement("p",{className:Ge.a.delete,onClick:function(t){return e.handleRemove(t,e.product.id)}},"X"));return e.product&&(e.product.price,e.product.priceTotal&&e.product.priceTotal),o.a.createElement("div",{className:Ge.a.lineItem},o.a.createElement("div",{style:{width:200}},o.a.createElement(Pe.a,{styles:t,isDisabled:e.active,onChange:e.handleSelect,value:e.selectValue,options:a})),e.product&&"print"===e.product.category?o.a.createElement("input",{type:"number",value:e.product.quantity,placeholder:"Qty",onChange:function(t){return e.handleQuantity(t,e.product.id)}}):null,r,e.product?o.a.createElement("p",null,e.product.priceTotalFull!==e.product.priceTotal?o.a.createElement("span",{className:Ge.a.fullPrice},"$",e.product.priceTotalFull," - "):"","$",e.product.priceTotal," AUD"):null)},Le=(a(367),a(161)),Me=a.n(Le),Ue=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={productStatus:{print:!1,digital:!1},products:JSON.parse(JSON.stringify(a.props.products)),lineItems:[],lineItemCount:1},a.handleCheckbox=function(e){var t=Object(x.a)({},a.state.productStatus);t[e.target.name]=e.target.checked,a.setState({productStatus:t},function(){})},a.rev=function(e){var t=(a.state.lineItems.length-1)/2;return e>t?e-(2*(e-t)-1)-1:e+(2*(t-e)+1)-1},a.handleQuantity=function(e,t){var r=e.target.value,o=a.state.lineItems.findIndex(function(e){return e.photoId===a.props.data.id&&e.id===t}),l=Object(x.a)({},a.state.lineItems[o]);l.quantity=+r,l.priceTotal=l.price*l.quantity,l.priceTotalFull=l.priceTotal;var n=a.props.discounts.lineItems;if(l.discount)for(var i=0;i<l.discount.length;i++)for(var s=l.discount[i],c=0;c<n.length;c++)if(n[c].id===s&&l.quantity>=n[c].quantity){var d=l.quantity-n[c].quantity+1,_=n[c].discount*d,u=l.price*(l.quantity-d);l.priceTotal=_+u;break}var m=Object(ae.a)(a.state.lineItems);m[o]=l,a.setState({lineItems:m},function(){a.props.handlePurchaseCart(l)})},a.handleSelect=function(e){var t=e.category,r=e.index,o=Object(x.a)({},a.state.products[t][r]);o.quantity=1,o.photoId=a.props.data.id,o.productId=r;var l=JSON.parse(JSON.stringify(a.state.products));l[t][r].disabled=!0;var n=Object(ae.a)(a.state.lineItems);n.push(o),a.setState(function(e){return{lineItems:n,products:Object(x.a)({},e.products,l)}},function(){a.props.handlePurchaseCart(o)})},a.removeItem=function(e,t){var r=a.state.lineItems.findIndex(function(e){return e.photoId===a.props.data.id&&e.id===t}),o=Object(ae.a)(a.state.lineItems),l=o[r],n=l.productId;o.splice(r,1);var i=JSON.parse(JSON.stringify(a.state.products));i[l.category][n].disabled=!1,a.setState(function(e){return{lineItems:o,products:Object(x.a)({},e.products,i)}},function(){a.props.handleItemRemove(l)})},a}return Object(_.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.count||0,a=this.props.panel||null,r=this.props.data.images&&this.props.data.images.length>0?this.props.data.images[0]:this.props.data,l=null;this.props.favourite&&(l=o.a.createElement("div",{className:"c-cards-view__buttons"},o.a.createElement("div",{onClick:function(){return e.props.favHandler(e.props.data)},className:"c-cards-view__favourite"}),o.a.createElement("div",{onClick:function(){return e.props.handleRemovePhoto(e.props.data.id)},className:O()([Me.a.close,"c-cards-view__close"])})));var n=this.state.products.print.map(function(e,t){return{value:e.id,label:e.label,category:"print",index:t,disabled:e.disabled}}),i=this.state.products.digital.map(function(e,t){return{value:e.id,label:e.label,category:"digital",index:t,disabled:e.disabled}}),s=o.a.createElement(Ae,{key:93939393939,active:!this.state.productStatus.digital,options:i,selectValue:null,handleSelect:this.handleSelect}),c=this.state.lineItems.filter(function(e,t){return"digital"===e.category}),d=c.map(function(t,a){if("digital"===t.category){var r=e.props.handleGetCartItemDiscount(t);return r&&(t.priceTotal=r),o.a.createElement(Ae,{key:a,index:a+1,active:!0,options:i,selectValue:i[t.productId],product:t,handleSelect:e.handleSelect,handleQuantity:e.handleQuantity,handleRemove:e.removeItem})}}),_=o.a.createElement(Ae,{key:93939393939,active:!this.state.productStatus.print,options:n,selectValue:null,handleSelect:this.handleSelect}),u=this.state.lineItems.filter(function(e,t){return"print"===e.category}),m=u.map(function(t,a){if("print"===t.category)return o.a.createElement(Ae,{key:a,index:a+1,active:!0,options:n,selectValue:n[t.productId],product:t,handleSelect:e.handleSelect,handleQuantity:e.handleQuantity,handleRemove:e.removeItem})});return o.a.createElement("div",{onClick:function(){return e.props.cardHandler(t,a)},className:this.props.styles},o.a.createElement("a",{href:this.props.data.url,className:"","data-id":this.props.data.id,"data-guid":this.props.data.guid,"data-position":this.props.data.position,"data-social":this.props.data.social,"data-article-image":this.props.data.articleImg,"data-article-text":this.props.data.title},o.a.createElement("article",{className:"c-cards-view"},r.hasMedia?o.a.createElement("figure",{className:"c-cards-view__media"},o.a.createElement("picture",null,o.a.createElement("source",{media:"(max-width: 767px) and (min-width: 501px)",srcSet:this.props.data.imageMedium}),o.a.createElement("source",{media:"(max-width: 500px)",srcSet:this.props.data.imageSmall}),!1===this.props.data.lazyload?o.a.createElement("img",{width:this.props.data.imgWidth,height:this.props.data.imgHeight,className:"img-fluid",src:r.image,alt:""}):o.a.createElement("img",{width:this.props.data.imgWidth,height:this.props.data.imgHeight,className:"img-fluid",src:r.image,"data-original":this.props.data.articleImg,alt:""}),o.a.createElement("div",{className:"video-icon"}))):null,o.a.createElement("div",{className:"c-cards-view__container"},o.a.createElement("div",{className:"c-cards-view__photo-top"},o.a.createElement("h2",{className:"c-cards-view__heading"},o.a.createElement(K.a,{clamp:2},this.props.data.title)),l||null),o.a.createElement(Fe,null,o.a.createElement(Ie,{label:"Print",checked:this.state.productStatus.print,name:"print",onChange:this.handleCheckbox}),o.a.createElement("div",{className:"c-cards-view__lineItems"},m,u.length<this.state.products.print.length?_:null)),o.a.createElement(Fe,null,o.a.createElement(Ie,{label:"Digital",checked:this.state.productStatus.digital,name:"digital",onChange:this.handleCheckbox}),o.a.createElement("div",{className:"c-cards-view__lineItems"},d,c.length<this.state.products.digital.length?s:null))))))}}]),t}(r.Component),We=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={networkData:null,blogData:{title:"Photo sales",url:"www.picturebooth.com",guid:"b6d174e5-70d2-4274-900a-46632b9b3e56"},photos:null,cart:[],purchaseCart:[],total:0,discounts:null,products:null},a.attachDiscountsFromRules=function(e,t,r){for(var o=0;o<t.length;o++)for(var l=t[o],n=[].concat(r.rules[l]),i=0;i<n.length;i++){var s=l;if("products"===l&&(s="id"),console.log("THE CHECK:   ",l,s,n[i],e[s]),e[s]!==n[i])return!1}return e=Object(x.a)({},e,{discount:r.id}),a.discountProducts.push(e),!0},a.attachDiscountsFromQuantity=function(e,t){t.length>0&&(e.discount.forEach(function(r){t.length>=r.quantity&&(r.ruleset_id=e.id,r.priority=e.priority,a.currentDiscountQuantity<r.quantity&&(a.currentDiscountQuantity=r.quantity,a.currentDiscount=Object(x.a)({},r,{products:t})))}),a.currentDiscount&&a.currentDiscount.products.forEach(function(e){a.productsWithDiscounts.indexOf(e.id+"-"+e.photoId)>-1?-1===a.productsWithDoubleDiscounts.indexOf(e.id+"-"+e.photoId)&&a.productsWithDoubleDiscounts.push(e.id+"-"+e.photoId):a.productsWithDiscounts.push(e.id+"-"+e.photoId)}))},a.getFromCart=function(e,t){var r=a.state.purchaseCart.filter(function(a){return a.photoId===e&&a.productId===t});return r.length>0&&JSON.parse(JSON.stringify(r[0])),null},a.calculateTotal=function(){var e=a.state.discounts.cart,t=JSON.parse(JSON.stringify(a.state.purchaseCart));a.discountCollection={},a.productsWithDiscounts=[],a.productsWithDoubleDiscounts=[];for(var r=0;r<e.length;r++){var o=e[r];a.discountProducts=[],a.currentDiscountQuantity=0,a.currentDiscount=null,a.collatedDiscounts=[];e:for(var l=0;l<t.length;l++){var n=t[l];if(o.rules){var i=Object.keys(o.rules);if(!1===a.attachDiscountsFromRules(n,i,o))continue e}}console.log("DISCOUNTS FROM RULES",a.discountProducts),a.attachDiscountsFromQuantity(o,a.discountProducts),a.currentDiscount&&(a.discountCollection[a.currentDiscount.ruleset_id]=a.currentDiscount)}console.group("results"),console.log("DISCOUNT COLLECTION",a.discountCollection),console.log("PRODUCTS WITH DISCOUNTS",a.productsWithDiscounts),console.log("PRODUCTS WITH DOUBLE DISCOUNTS",a.productsWithDoubleDiscounts),console.groupEnd(),a.calculateCollatedDiscounts();var s=JSON.parse(JSON.stringify(a.collatedDiscounts));if(a.productsWithDoubleDiscounts.length>0){var c=JSON.parse(JSON.stringify(a.productsWithDoubleDiscounts));s=a.reconcileCollatedDiscounts(c,s,t)}console.group("reconcile"),console.log("COLLATED DISCOUNTS: ",a.collatedDiscounts),console.log(a.state.purchaseCart),console.groupEnd(),t=a.applyDiscountsToCart(t,s),console.log("FINAL CART:",t);var d=t.reduce(function(e,t){return t.priceTotal+e},0);a.setState({total:d,purchaseCart:t})},a.handlePurchaseCart=function(e){console.log("handling purchase cart");var t=Object(ae.a)(a.state.purchaseCart),r=a.getCartItemIndex(e);-1===r?t.push(e):t[r]=e,a.setState({purchaseCart:t},function(){console.log("STATE:",a.state),a.calculateTotal()})},a.handleRemoveItem=function(e){var t=Object(ae.a)(a.state.purchaseCart).filter(function(t){return!(t.photoId===e.photoId&&t.id===e.id)});a.setState({purchaseCart:t},function(){a.calculateTotal()})},a.handleRemovePhoto=function(e){var t=a.state.purchaseCart.filter(function(t){return t.photoId!==e}),r={};r.id=e,a.setState({purchaseCart:t},function(){a.props.toggleCart(r),a.calculateTotal()})},a.homeLinkHandler=function(){a.props.history.push("/"+window.layoutTemplate)},a.handleGetCartItemDiscount=function(e){var t=a.getCartItemIndex(e);return-1!==t&&a.state.purchaseCart[t].priceTotal},a}return Object(_.a)(t,e),Object(s.a)(t,[{key:"getSiteDiscounts",value:function(){return M.a.get("/api/shop/discounts")}},{key:"getSiteProducts",value:function(){return M.a.get("/api/shop/products")}},{key:"componentDidMount",value:function(){console.log("component mounted");var e=this;M.a.all([this.getSiteDiscounts(),this.getSiteProducts()]).then(M.a.spread(function(t,a){console.log("what",t.data),console.log("now",a.data.data),e.setState({discounts:t.data.data,products:a.data.data},function(){console.log(e.state)})}))}},{key:"getCartItemIndex",value:function(e,t){return"undefined"===typeof t&&(t=this.state.purchaseCart),t.findIndex(function(t){return t.photoId===e.photoId&&t.id===e.id})}},{key:"calculateCollatedDiscounts",value:function(){var e=this;for(var t in this.discountCollection)this.discountCollection.hasOwnProperty(t)&&function(){var a=e.discountCollection[t],r=0;"rest"===a.applyTo&&(r=a.quantity),a.products.forEach(function(e,t){if(t>=r){var o=a.ammount;e.priceTotal=o}}),e.collatedDiscounts.push(a)}()}},{key:"reconcileCollatedDiscounts",value:function(e,t,a){for(var r=0;r<e.length;r++){for(var o=e[r],l=null,n=0;n<t.length;n++)for(var i=t[n],s=0;s<i.products.length;s++){var c=i.products[s];o===c.id+"-"+c.photoId&&(null===l?l=c:c.priceTotal<l.priceTotal&&(l=c))}if(l)for(var d=null,_=0;_<t.length;_++)for(var u=t[_],m=0;m<u.products.length;m++){var g=u.products[m];o===g.id+"-"+g.photoId&&(g.priceTotal==l.priceTotal?null===d&&(d=g):t[_].products.splice(m,1))}}return t}},{key:"applyDiscountsToCart",value:function(e,t){for(var a=0;a<t.length;a++)for(var r=t[a],o=0;o<r.products.length;o++){var l=r.products[o],n=this.getCartItemIndex(l,e);e.splice(n,1,l)}return e}},{key:"render",value:function(){var e=this,t=null,a=null;return this.state.discounts&&this.state.products&&(a=this.props.cart.map(function(t,a){var r=[o.a.createElement(Ue,{key:a,data:t,styles:"card-3-mobile card-3-tablet card-3-desktop",cardHandler:function(){return!1},favHandler:e.props.favHandler,products:e.state.products,cartHandler:null,handleItemRemove:e.handleRemoveItem,handlePurchaseCart:e.handlePurchaseCart,handleGetCartItemDiscount:e.handleGetCartItemDiscount,discounts:e.state.discounts,handleRemovePhoto:e.handleRemovePhoto,favourite:!0})];return a!==e.props.cart.length-1&&r.push(o.a.createElement(pe,{key:a+"div"})),r}),t=this.state.purchaseCart.map(function(e,t){return o.a.createElement("div",{key:t},o.a.createElement("p",null,e.label," - ",e.quantity," - $",e.priceTotal))})),o.a.createElement(o.a.Fragment,null,o.a.createElement(w,null,o.a.createElement(p,null,o.a.createElement(v,{classes:["col-12"]},o.a.createElement(X,{url:this.state.blogData.url,title:this.state.blogData.title,cartItems:this.props.cart.length,favourites:this.props.favourites.length,homeLinkHandler:this.homeLinkHandler,favouritesHandler:this.showFavourites,larger:!0,cart:!0}))),o.a.createElement(p,null,o.a.createElement(v,{classes:["col-12","col-lg-8"]},o.a.createElement(p,null,o.a.createElement(v,{classes:["col-12"]},o.a.createElement(X,{title:"My Cart",thin:!0}))),o.a.createElement(p,null,o.a.createElement(v,{classes:["col-12"]},a||null)),o.a.createElement(p,null,o.a.createElement(v,{classes:["col-12"]},o.a.createElement(Fe,null,o.a.createElement("h2",null,"Total"),o.a.createElement("p",null,"$",this.state.total," AUD"))))),o.a.createElement(v,{classes:["col-12","col-lg-4"]},t))))}}]),t}(r.Component),Qe=Object(m.b)(function(e){return{favourites:e.favourites,cart:e.cart}},function(e){return{toggleFavourite:function(t){e({type:"TOGGLE_FAVOURITE",photo:t})},toggleCart:function(t){return e({type:"TOGGLE_CART",photo:t})}}})(We);M.a.defaults.baseURL=window.location.origin,M.a.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",M.a.defaults.headers.common["X-CSRF-Token"]=window.vigblat,M.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",delete window.vigblat;var Je=window.location.pathname.split("/");"page"===Je[1]?window.layoutTemplate=Je[1]+"/"+Je[2]||"photos":window.layoutTemplate=Je[1];var qe=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).pageClicked=function(){console.log("page clicked")},a}return Object(_.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{onClick:this.pageClicked},o.a.createElement(u.c,null,o.a.createElement(u.a,{path:"/"+window.layoutTemplate+"/checkout",component:Qe}),o.a.createElement(u.a,{path:"/"+window.layoutTemplate,component:ve}),o.a.createElement(u.a,{path:"/",component:ve})))}}]),t}(r.Component),Be=(a(371),a(62)),Xe={favourites:[{id:"6e5hfdghs5dt",title:"Prince One",content:"First image in another gallery",publishDate:"23rd may 2000",hasMedia:!0,image:"https://static.guim.co.uk/sys-images/Music/Pix/pictures/2011/6/3/1307115506503/Prince-performing-on-stag-007.jpg"}],cart:[{id:"j49fj3fgsdsgdf8rj",title:"Cat",content:"This is the body content which is very long as i want it to dot dot dot with an eillpsesssese so that i can see it's wokring and then celebrate a job well done",publishDate:"23rd may 2000",hasMedia:!0,image:"https://i.ytimg.com/vi/EuvTORWs244/maxresdefault.jpg"},{id:"lkiuygfyny66",title:"Lego",content:"Less writing for the second card",publishDate:"24rd may 2000",hasMedia:!0,image:"https://weburbanist.com/wp-content/uploads/2008/10/lego_art_1.jpg"}]},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case"TOGGLE_FAVOURITE":var a=Object(ae.a)(e.favourites),r=a.filter(function(e){return t.photo.id!==e.id});return r.length<a.length?a=r:a.push(t.photo),Object(x.a)({},e,{favourites:a});case"TOGGLE_CART":var o=Object(ae.a)(e.cart);console.log("toggling cart");var l=o.filter(function(e){return t.photo.id!==e.id});return l.length<o.length?o=l:o.push(t.photo),console.log(o),Object(x.a)({},e,{cart:o});default:return e}},Ke=a(89),Ve=Object(Be.b)(ze),Ye=document.getElementById("photo-sales");n.a.render(o.a.createElement(m.a,{store:Ve},o.a.createElement(Ke.a,null,o.a.createElement(qe,null))),Ye)},49:function(e,t,a){e.exports={search:"search_search__PLg6J",search__icon:"search_search__icon__2T2TF","search__calander-container":"search_search__calander-container__3Yh_G",search__dates:"search_search__dates__2Bfc4",search__datecontainer:"search_search__datecontainer__mUfbe",search__label:"search_search__label__3FXlo",search__button:"search_search__button__23Ern"}},67:function(e,t,a){e.exports={lineItem:"lineItem_lineItem__2j9gq",delete:"lineItem_delete__3OUrb",fullPrice:"lineItem_fullPrice__1mpk4"}},92:function(e,t,a){e.exports={"c-form":"form_c-form__oZp3f","c-form__input":"form_c-form__input__3JrWJ","c-form__input--bordered":"form_c-form__input--bordered__1MG8C","c-form__input--bordered-bottom":"form_c-form__input--bordered-bottom__1z_XS",formError:"form_formError__2xXjr","c-form__label":"form_c-form__label__3XwrF","c-form__help-block":"form_c-form__help-block__3fHwW","c-form__buttons":"form_c-form__buttons__3tojQ","c-form__buttons--left":"form_c-form__buttons--left__3KKlQ","c-form__checkbox":"form_c-form__checkbox__1S4Po",error:"form_error__2FWSn"}},93:function(e,t,a){e.exports={button:"button_button__2Bbwt","button--top-30":"button_button--top-30__1p-F6","button--block":"button_button--block__1DNjC","button--inline":"button_button--inline__Z_de7","button--rounded":"button_button--rounded__3CBIl","button--radius":"button_button--radius__18Gba","button--md":"button_button--md__4y_G_","button--blue":"button_button--blue__3HcfG","button--blue-bordered":"button_button--blue-bordered__2k8Gp","button--info":"button_button--info__SM7iR","button--info-bordered":"button_button--info-bordered__1idgC","button--red":"button_button--red__uEZX_","button--red-bordered":"button_button--red-bordered__1_F50","button--wtbgred":"button_button--wtbgred__1Fn1K","button--wtbg":"button_button--wtbg__1-Mbn","button--wtbg-bordered":"button_button--wtbg-bordered__2Zeyt","button--grey":"button_button--grey__1WAwl","button--grey-bordered":"button_button--grey-bordered__1ygJO","button--lightgrey":"button_button--lightgrey__3Kjr8","button--lightgrey-bordered":"button_button--lightgrey-bordered__1yb_v","button--boderwidth1":"button_button--boderwidth1__2lB-i","button--disabled":"button_button--disabled__-ro34","button--text":"button_button--text__2knVg","button--link-muted":"button_button--link-muted__a6zQO",img_svg:"button_img_svg__2uRYH","c-button-transparent":"button_c-button-transparent__S-f6c",icon:"button_icon__1TP3-",selected:"button_selected__1WcJ1"}},94:function(e,t,a){e.exports={datepicker:"datepicker_datepicker__3kCnz",datepicker__calander_container:"datepicker_datepicker__calander_container__2DPFu"}},96:function(e,t,a){e.exports={favourite:"favourite_favourite__3Efuh",favouriteOn:"favourite_favouriteOn__1MZbE","favourite--grey":"favourite_favourite--grey__29-HR"}},97:function(e,t,a){e.exports={favourites__title:"favourites_favourites__title__1gkvm"}}},[[168,2,1]]]);
//# sourceMappingURL=main.chunk.js.map